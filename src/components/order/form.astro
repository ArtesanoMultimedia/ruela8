---
import PaymentForm from "../react/PaymentForm";

const styles = {
    bruno: {
        fontFamily: 'Bruno Ace',
    }
}
---

<script>

    const unitPrice = 15
    const shippingCost = 5
    const totalPrice = unitPrice + shippingCost

    let quantity = 1
    const decrementQuantity = () => {
        if (quantity > 1) {
            quantity = quantity - 1
        }
    }
    const incrementQuantity = () => {
        quantity = quantity + 1
    }
    const handleQuantityChange = (event) => {
        quantity = event.target.value
    }

    const setStep = (value) => {
        step = value
    }
</script>


<div class="relative pt-36 ml-auto">
    {step === 1 && (
            <div class="flex flex-col md:flex-row">
                <div class="md:basis-2/3">
                    <img src="/images/portada.jpg" alt="Portada disco Ruela 8" class="w-full"/>
                </div>
                <div class="md:basis-1/3">
                    <div
                            class="flex flex-col justify-center md:p-l-12 sm:p-l-0 md:p-t-0 xl:p-t-12 sm:p-t-12 xs:p-t-12 w-full">
                        <img src="/images/logo.png" alt="Logo Ruela 8" class="w-24"/>
                        <p class="text-xl text-gray-700 dark:text-gray-300 mb-6 " style={styles.bruno}>La Sinfonía de una
                            Década</p>


                        <div id="orderForm" class="space-y-6">
                            <div>
                                <label htmlFor="quantity"
                                       class="block text-sm font-medium text-gray-700">Cantidad</label>
                                <div class="flex items-center mt-1">
                                    <button
                                            type="button"
                                            onClick={decrementQuantity}
                                            class="min-w-8 w-8 h-8 flex items-center justify-center border border-primary text-primary rounded-md"
                                    >
                                        -
                                    </button>
                                    <input
                                            type="number"
                                            id="quantity"
                                            name="quantity"
                                            min="1"
                                            value={quantity}
                                            onChange={handleQuantityChange}
                                            class="flex-1 max-w-full mx-2 block py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm text-center"
                                    />
                                    <button
                                            type="button"
                                            onClick={incrementQuantity}
                                            class="min-w-8 w-8 h-8 flex items-center justify-center border border-primary text-primary rounded-md"
                                    >
                                        +
                                    </button>
                                </div>
                            </div>

                            <div class="flex justify-between">
                                <p class="text-sm font-medium text-gray-700">Precio unitario:</p>
                                <p class="text-sm font-medium text-gray-700">{unitPrice} €</p>
                            </div>

                            <div class="flex justify-between">
                                <p class="text-sm font-medium text-gray-700">Cantidad:</p>
                                <p class="text-sm font-medium text-gray-700">{quantity}</p>
                            </div>

                            <div class="flex justify-between">
                                <p class="text-sm font-medium text-gray-700">Subtotal:</p>
                                <p class="text-sm font-medium text-gray-700">{unitPrice * quantity} €</p>
                            </div>

                            <div class="flex justify-between">
                                <p class="text-sm font-medium text-gray-700">Gastos de envío:</p>
                                <p class="text-sm font-medium text-gray-700">{shippingCost} €</p>
                            </div>

                            <div class="flex justify-between">
                                <p class="text-lg font-semibold text-gray-900">Total:</p>
                                <p class="text-lg font-semibold text-gray-900">{totalPrice} €</p>
                            </div>

                            <button
                                    class="w-full flex justify-center py-2 px-4 mt-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary"
                                    onClick={() => setStep(2)}
                            >Continuar
                            </button>

                        </div>
                    </div>
                </div>
            </div>
    )}

    {step === 2 && (
            <PaymentForm
                    quantity={quantity}
                    totalPrice={totalPrice}
                    setStep={setStep}
            />
    )}
</div>